import{d as F,E as J,J as R,j as H,ck as P,a as m,l as V,r as q,o as d,c,b as t,t as o,z as D,F as k,g as x,m as y,f as p,n as W,e as G,p as K,q as w,bS as Q,S as X,bP as Y,a4 as z,cl as B,cm as Z}from"./index-61bbdb05.js";const tt={class:"overflow-x-auto w-full"},et={class:"lg:!flex lg:!items-center lg:!justify-between #saved p-5"},st={class:"min-w-0 flex-1"},lt={class:"text-2xl font-bold leading-7 sm:!truncate sm:!text-3xl sm:!tracking-tight"},ot={class:"mt-1 flex flex-col sm:!mt-0 sm:!flex-row sm:!flex-wrap sm:!space-x-6"},at={class:"mt-2 flex items-center text-sm text-grey-500"},nt=t("svg",{class:"mr-1.5 h-5 w-5 flex-shrink-0 text-grey-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M6 3.75A2.75 2.75 0 018.75 1h2.5A2.75 2.75 0 0114 3.75v.443c.572.055 1.14.122 1.706.2C17.053 4.582 18 5.75 18 7.07v3.469c0 1.126-.694 2.191-1.83 2.54-1.952.599-4.024.921-6.17.921s-4.219-.322-6.17-.921C2.694 12.73 2 11.665 2 10.539V7.07c0-1.321.947-2.489 2.294-2.676A41.047 41.047 0 016 4.193V3.75zm6.5 0v.325a41.622 41.622 0 00-5 0V3.75c0-.69.56-1.25 1.25-1.25h2.5c.69 0 1.25.56 1.25 1.25zM10 10a1 1 0 00-1 1v.01a1 1 0 001 1h.01a1 1 0 001-1V11a1 1 0 00-1-1H10z","clip-rule":"evenodd"}),t("path",{d:"M3 15.055v-.684c.126.053.255.1.39.142 2.092.642 4.313.987 6.61.987 2.297 0 4.518-.345 6.61-.987.135-.041.264-.089.39-.142v.684c0 1.347-.985 2.53-2.363 2.686a41.454 41.454 0 01-9.274 0C3.985 17.585 3 16.402 3 15.055z"})],-1),it=t("div",{class:"mt-5 flex lg:!ml-4 lg:!mt-0"},null,-1),dt={class:"table table-compact w-full"},ct=t("th",null,"Blockchain",-1),ut=t("th",null,null,-1),rt={class:"hover hover:customChocko"},ht={class:"capitalize"},mt={key:0},vt={key:0,class:"text-xs flex flex-wrap"},ft={class:"mt-1"},_t={class:"badge"},pt={class:"capitalize"},gt={class:""},bt={class:"text-center"},kt={for:"add-validator",class:"btn #sav1 mt-5"},xt={class:"modal"},yt={class:"modal-box relative"},wt=t("label",{for:"add-validator",class:"bg-customChocko btn btn-sm btn-circle absolute right-2 top-2"},"âœ•",-1),Ct={class:"text-lg font-bold"},St={class:"form-control bg-customDark my-5 border-2"},It={class:"input-group input-group-md"},$t=["value"],Nt={class:"py-4 max-h-60 overflow-y-auto"},Vt={class:"table table-compact w-full hover"},Dt=t("th",null,null,-1),zt=["for"],Bt={class:"w-full"},jt=["id","value"],Ot={class:"modal-action"},Mt=t("div",{class:"h-6"},null,-1),Et=F({__name:"customize",props:["chain"],setup(Tt){const j=J(),C=R(),O=H(),g=P(),a=m(JSON.parse(localStorage.getItem("uptime-validators")||"{}")),b=m({}),h=m([]),r=m(O.chainName),v=m(j.validators),f=m("");function S(s){const l=g.chains[s];l&&l.endpoints.rest&&B.newDefault(l.endpoints.rest[0].address).getSlashingSigningInfos().then(e=>{b.value[s]=e.info})}a.value&&Object.keys(a.value).map(s=>{S(s)});function M(){const s=a.value[r.value];s&&(h.value=s.map(l=>l.address))}const T=V(()=>f.value?v.value.filter(s=>s.description.moniker.indexOf(f.value)>-1):v.value),A=V(()=>{const s=[];return a.value&&Object.keys(a.value).map(l=>{const n=a.value[l],e=b.value[l];n&&e&&n.forEach(u=>{const i=e.find(_=>Z(_.address)===u.address);s.push({chainName:l,v:u,sigingInfo:i})})}),s});function E(){b.value[r.value]||S(r.value);const s=[];h.value.forEach(l=>{const n=v.value.find(e=>z(e.consensus_pubkey)===l);n&&s.push({name:n.description.moniker||l,address:l})}),a.value||(a.value={}),a.value[r.value]=s,localStorage.setItem("uptime-validators",JSON.stringify(a.value))}function L(){var e,u;v.value=[];const s=(u=(e=g.chains[r.value].endpoints.rest)==null?void 0:e.at(0))==null?void 0:u.address;if(!s)return;B.newDefault(s).getStakingValidators("BOND_STATUS_BONDED").then(i=>{v.value=i.validators});const n=a.value[r.value];n?h.value=n.map(i=>i.address):h.value=[]}function U(s){if(s){const l=Number(s);if(l<10)return" badge-base-content";if(l>1e3)return" badge-error";if(l>0)return" badge-warning"}}return(s,l)=>{const n=q("RouterLink");return d(),c("div",null,[t("div",tt,[t("div",et,[t("div",st,[t("h2",lt,o(s.$t("uptime.my_validators")),1),t("div",ot,[t("div",at,[nt,D(" "+o(s.$t("uptime.add_validators_monitor")),1)])])]),it]),t("table",dt,[t("thead",null,[t("tr",null,[t("th",null,o(s.$t("uptime.no")),1),ct,t("th",null,o(s.$t("account.validator")),1),t("th",null,o(s.$t("uptime.signed_blocks")),1),t("th",null,o(s.$t("uptime.last_jailed_time")),1),t("th",null,o(s.$t("uptime.tombstoned")),1),t("th",null,o(s.$t("uptime.missing_blocks")),1),ut])]),t("tbody",null,[(d(!0),c(k,null,x(A.value,(e,u)=>{var i,_,I,$,N;return d(),c("tr",rt,[t("td",null,o(u+1),1),t("td",ht,o(e.chainName),1),t("td",null,o(e.v.name),1),t("td",null,[e.sigingInfo?(d(),c("span",mt,o(Number(e.sigingInfo.index_offset)-Number(e.sigingInfo.start_height)),1)):y("",!0)]),t("td",null,[e.sigingInfo&&!((i=e.sigingInfo)!=null&&i.jailed_until.startsWith("1970"))?(d(),c("div",vt,[t("div",ft,o(p(C).toLocaleDate((_=e.sigingInfo)==null?void 0:_.jailed_until)),1),t("div",_t,o(p(C).toDay(e.sigingInfo.jailed_until,"from")),1)])):y("",!0)]),t("td",pt,o((I=e.sigingInfo)==null?void 0:I.tombstoned),1),t("td",null,[e.sigingInfo?(d(),c("span",{key:0,class:W(["badge",U(($=e.sigingInfo)==null?void 0:$.missed_blocks_counter)])},o((N=e.sigingInfo)==null?void 0:N.missed_blocks_counter),3)):y("",!0)]),t("td",gt,[G(n,{to:`/${e.chainName}/uptime/#blocks`,class:"btn btn-xs #sav1"},{default:K(()=>[D(o(s.$t("module.blocks")),1)]),_:2},1032,["to"])])])}),256))])])]),t("div",bt,[t("label",kt,o(s.$t("uptime.add_validators")),1)]),t("input",{type:"checkbox",id:"add-validator",class:"modal-toggle",onChange:M},null,32),t("div",xt,[t("div",yt,[wt,t("h3",Ct,o(s.$t("uptime.add_validators")),1),t("div",St,[t("div",It,[w(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),class:"select select-bordered capitalize",onChange:L},[(d(!0),c(k,null,x(p(g).chains,e=>(d(),c("option",{value:e.chainName},o(e.chainName),9,$t))),256))],544),[[Q,r.value]]),w(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>f.value=e),type:"text",class:"input w-full",placeholder:"keywords to filter validator"},null,512),[[X,f.value]])])]),t("div",Nt,[t("table",Vt,[t("thead",null,[t("tr",null,[t("th",null,o(s.$t("account.validator")),1),Dt])]),t("tbody",null,[(d(!0),c(k,null,x(T.value,(e,u)=>(d(),c("tr",null,[t("td",null,[t("label",{for:e.operator_address},[t("div",Bt,o(u+1)+". "+o(e.description.moniker),1)],8,zt)]),t("td",null,[w(t("input",{id:e.operator_address,"onUpdate:modelValue":l[2]||(l[2]=i=>h.value=i),class:"checkbox",type:"checkbox",value:p(z)(e.consensus_pubkey)},null,8,jt),[[Y,h.value]])])]))),256))])])]),t("div",Ot,[t("label",{class:"btn #sav1",onClick:E},o(s.$t("uptime.add")),1)])])]),Mt])}}});export{Et as default};
